"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("./nhost-js/auth.cjs.js"),s=require("./nhost-js/fetch.cjs.js"),t=require("./nhost-js/functions.cjs.js"),r=require("./nhost-js/graphql.cjs.js"),n=require("./refreshSession-Bw715ZmX.js"),o=require("./nhost-js/session.cjs.js"),i=require("./nhost-js/storage.cjs.js");class a{auth;storage;graphql;functions;sessionStorage;constructor(e,s,t,r,n){this.auth=e,this.storage=s,this.graphql=t,this.functions=r,this.sessionStorage=n}getUserSession(){return this.sessionStorage.get()}async refreshSession(e=60){return n.refreshSession(this.auth,this.sessionStorage,e)}clearSession(){this.sessionStorage.remove()}}function c(e,t,r){const n=[s.updateSessionFromResponseMiddleware(t),s.attachAccessTokenMiddleware(t)];return r&&n.unshift(s.sessionRefreshMiddleware(e,t)),n}const h=(e,s,t,r)=>r||(s&&t?`https://${s}.${e}.${t}.nhost.run/v1`:`https://local.${e}.local.nhost.run/v1`);exports.createClient=function(s={}){const{subdomain:n,region:u,authUrl:l,storageUrl:g,graphqlUrl:f,functionsUrl:j,storage:S=o.detectStorage()}=s,p=new o.SessionStorage(S),q=h("auth",n,u,l),d=h("storage",n,u,g),C=h("graphql",n,u,f),U=h("functions",n,u,j),A=e.createAPIClient(q),P=c(A,p,!0);for(const e of P)A.pushChainFunction(e);const I=i.createAPIClient(d,P),w=r.createAPIClient(C,P),v=t.createAPIClient(U,P);return new a(A,I,w,v,p)},exports.createServerClient=function(s){const{subdomain:n,region:u,authUrl:l,storageUrl:g,graphqlUrl:f,functionsUrl:j,storage:S}=s,p=new o.SessionStorage(S),q=h("auth",n,u,l),d=h("storage",n,u,g),C=h("graphql",n,u,f),U=h("functions",n,u,j),A=e.createAPIClient(q),P=c(A,p,!1);for(const e of P)A.pushChainFunction(e);const I=i.createAPIClient(d,P),w=r.createAPIClient(C,P),v=t.createAPIClient(U,P);return new a(A,I,w,v,p)},exports.generateServiceUrl=h;
//# sourceMappingURL=nhost-js.cjs.js.map
